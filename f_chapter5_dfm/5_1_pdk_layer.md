# 5.1 PDK構造の理解とSky130レイヤー体系

## 🎯 本節の目的

- Sky130 PDKにおける設計層（layer）の分類と役割を理解する  
- レイアウトとマスクの対応関係を把握し、物理設計の基本的な階層構造を学ぶ  
- DRC/LVSなど後工程で必要となる層理解の基盤を築く

---

## 🧱 Sky130 PDKのレイヤー構造（代表例）

| レイヤー名 | 用途 | GDS番号（例） | 備考 |
|------------|------|----------------|------|
| `nwell`    | N型ウェル形成     | 64/20     | N-MOSトランジスタの下地 |
| `pwell`    | P型ウェル形成     | 64/44     | P-MOS用。bulk接続にも関与 |
| `poly`     | ゲート電極        | 66/20     | ゲート形成・最小寸法制約あり |
| `li1`      | ローカル配線層    | 67/20     | ポリとコンタクト間を接続 |
| `met1`     | メタル1層         | 68/20     | 配線最下層、最も密度高い層 |
| `met2`〜`met5` | 上位配線層   | 69/20〜72/20 | 層が上がるごとにワイドな配線 |
| `via1`〜`via4` | 層間ビア      | 70/44〜73/44 | メタル層間の接続用ビア |
| `nimplant` | Nドープ形成      | 65/20     | トランジスタ閾値制御等に使用 |
| `pimplant` | Pドープ形成      | 65/44     | 同上（P型） |
| `dnwell`   | deep n-well     | 64/18     | 高耐圧用途などで使用される |

> GDS番号は `[layer_number/datatype]` 形式で示され、MagicやKLayoutで利用される

---

## 🔍 PDKに含まれるファイル構成（例：sky130A）

```
sky130A/
├── libs.tech/
│   ├── magic/             ← Magic用レイヤー定義
│   ├── klayout/tech/      ← KLayout用
│   ├── openlane/          ← Flow設定
│   └── netgen/            ← LVSルール定義
└── libs.ref/
    └── sky130_fd_pr/      ← セルライブラリ本体
```

---

## 🧩 レイヤーの階層構造イメージ

- トランジスタ層（nwell, poly, implant）
- 接続層（li1, via, metal）
- 保護/注釈層（np, pp, boundary など）

---

## 📎 用語補足

- **コンタクト (contact)**：li1〜met1間の導通
- **ビア (via)**：上位メタル層間（例：met2→met3）の接続
- **ピッチ (pitch)**：配線の間隔、レイヤーごとに制限あり

---

## ✅ 本節まとめ

- Sky130のPDKは多層構造であり、層ごとの役割を把握することが設計の基盤となる  
- GDS番号とレイヤー名を照合することで、MagicやKLayoutでの解析が円滑に行える  
- 次節ではこれらの層を**Magic上で可視化**し、実際のGDS構造を観察する

---

👉 [5.2 MagicによるGDS階層と層構成の可視化](5_2_magic_gds.md)
