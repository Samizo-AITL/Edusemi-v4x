# 📐 レイアウトの基本原則と設計ルールの意図

---

## 📘 概要

レイアウト設計は、論理回路を物理的な構造として**シリコン上に配置・配線する工程**です。  
PDK（Process Design Kit）に従い、設計ルールを満たしながら、**性能・信頼性・歩留まりを両立**する必要があります。

このセクションでは、**レイアウト設計の基本構造と考え方**を学びます。

---

## 🧱 幅（Width）と間隔（Spacing）

| 項目 | 説明 | 教育的意義 |
|------|------|------------|
| 最小幅 | 各層（Poly、Metal等）に定義される | プロセス限界の反映 |
| 最小間隔 | 同一層または異層での距離制約 | ショート・リーク防止 |
| Width/Spacing Rule | 「W/Sルール」としてPDKに記載 | 歩留まり・耐電圧・CMP対応 |

※ 例：Metal1 の最小幅 0.14 μm、最小間隔 0.14 μm（0.28μm pitch）

---

## 🛤️ 配線層と層構成

| 層名 | 方向 | 主用途 |
|------|------|--------|
| Poly | 任意 | ゲート構造 |
| Metal1 | 横方向 | ローカル信号配線 |
| Metal2 | 縦方向 | GND/VDD配線（中間層） |
| Metal3〜n | 交互 | グローバル配線、パワーグリッド、クロック |

- **層を交互に使うことで、クロストークとIRドロップを抑制**
- **電源層は太く短く、論理層は高密度に**

---

## 🔌 パワーグリッドとウェルタップ

- **パワーグリッド**：Metal層で構成されるGND/VDDの網状配線  
  - ノイズ低減、IRドロップ緩和
- **ウェルタップ**：P/NウェルをGND/VDDに接続する構造
  - 寄生バイポーラの防止（ラッチアップ回避）

---

## ⚠️ 設計時のDRC（Design Rule Check）項目

| 項目 | 意図 |
|------|------|
| Min Width | フォトリソ限界／露光バラツキ |
| Min Spacing | ショート／配線歩留まり |
| Enclosure | Viaやコンタクトの被覆確保 |
| Density | CMP均一性（例：Metal fill挿入） |
| Notch | 不要な隙間・鋭角パターン防止 |

---

## 🎯 教材的意義

- 「レイアウトルールの数字」ではなく**背景となる物理現象**を理解
- 手動レイアウトと自動配置配線（P&R）双方の理解に活用
- **DRC違反がなぜNGか**を構造とプロセスから考察できるように

---

## 🔗 次のセクション

- [`cmp_dummy_pattern.md`](./cmp_dummy_pattern.md)：CMP均一性のためのパターン工夫へ

---

© 2025 Shinichi Samizo / MIT License
