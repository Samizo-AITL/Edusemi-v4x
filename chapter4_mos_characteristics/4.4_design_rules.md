# 4.4 デザインルールと寸法規則の意味

MOSトランジスタをはじめとするICの各構造は、製造プロセスの制約・ばらつき・歩留まりに応じて  
**寸法ルール（Design Rule）として規定され、PDK内に明記**されます。

本節では、sky130や0.18µmプロセスを例に、  
設計者が守るべき「寸法の意味」と「背景にある物理的・製造的理由」を解説します。

---

## 🧩 デザインルールとは何か？

### ▶ 定義
- 半導体製造で**確実にパターン形成・配線接続ができるように規定された、最小寸法と間隔の集合**
- PDK内に定義され、DRC（Design Rule Check）で違反を自動検出

### ▶ 主なルールの例

| ルール名 | 意味 | 教材上の観察ポイント |
|----------|------|----------------------|
| Lmin | ゲート長の最小値 | Id特性・遅延・リークへの影響 |
| Wmin | ゲート幅の最小値 | ドライブ能力、ばらつき |
| Poly to Diffusion | ポリと拡散の間隔 | LDD構造との関係、微細化限界 |
| Contact size/spacing | コンのサイズと間隔 | 配線密度と接続確実性 |
| Metal width/spacing | 金属配線の幅・間隔 | EM対策、RC遅延制御 |

---

## 🧠 ルールにはすべて「理由」がある

| 背景要因 | 寸法ルールへの反映 |
|----------|--------------------|
| リソグラフィ分解能 | Lmin、パターン密度制約 |
| エッチングや洗浄のばらつき | スペースルール（min spacing） |
| 歩留まり改善 | コン間隔、ベタGND配線の確保 |
| 電気的特性確保 | Wmin、オープン防止 |

> 教育では「ルール＝制限」ではなく、**「製造を守る設計者の配慮」**として理解させることが重要

---

## 🧪 教材プロセス（sky130等）でのDR観察例

- sky130には、DRルールの定義（.lef/.techファイル）と、Magicでの描画・DRCツールが整備されている
- 学生は以下のような観察・体験が可能：

| 教材課題 | 内容 |
|----------|------|
| Lminを下回るゲートを意図的に描画 → DRCでエラー | 寸法制限の自動検出とその理由を学ぶ |
| Metal幅・間隔を縮小して配線 → EMとIR drop議論へ | 寸法ルールと電気特性の関係に触れる |
| Contactを過密に → DRC失敗と構造破壊の可能性 | 製造視点の重要性を理解 |

---

## 📘 デザインルールは設計の「守り」ではなく「攻め」

- 単なる制約ではなく、**設計の安定性と量産性を高める「戦略的ルール」**
- ばらつき・信頼性・歩留まりといった複合課題の「接点」となる

---

## 次節への導入

これらのルールは、**PDK（Process Design Kit）として設計者に提供**され、  
設計フローの中でシミュレーションやレイアウト制約に組み込まれます。

👉 [4.5 PDKと設計基盤の構築（sky130を中心に）](4.5_pdk_and_design_infra.md) に進みます。

---
