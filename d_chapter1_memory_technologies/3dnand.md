# 🗂️ 3D NANDフラッシュメモリ

---

## 📘 概要

3D NANDは、**不揮発・大容量・コスト効率**を実現したフラッシュメモリ技術です。  
従来の2D NAND（平面構造）では**微細化限界や信頼性劣化**が問題化したため、セルを**垂直方向に積層（3D構造）**することでスケーリングが継続されています。

- SSD、eMMC、UFSなどの**ストレージデバイスに広く搭載**
- 電源オフでもデータを保持し、**長期保存が可能**
- 大容量化により、**1セルで複数ビット記憶（TLC/QLC）**を実現

---

## 🧱 構造と進化（図解）

      ┌─────────────────────┐
      │      コントローラ     │  ← ECC・ウェアレベリング・I/F制御
      └─────────────────────┘
               │││││││││││
     ┌──────────────────────────┐
     │   セルアレイ（垂直積層）    │  ← 64層〜500層以上に拡張中
     └──────────────────────────┘

### 🔍 基本構造と技術要素

| 要素 | 説明 |
|------|------|
| **Charge Trap / Floating Gate** | 電荷を絶縁層に閉じ込めることでデータを保持（不揮発） |
| **TLC / QLC** | 1セルで3ビット（TLC）、4ビット（QLC）を記憶可能 |
| **ページ / ブロック / ダイ** | 階層的な単位で読み書き・消去を管理 |

---

## 📊 メモリ比較（容量・速度・不揮発性）

| 特性 | 3D NAND | MRAM | SRAM | DRAM |
|------|---------|------|------|------|
| 不揮発性 | ◎ | ◎ | × | × |
| 書換回数 | △（10⁴〜10⁵） | ◎（10¹⁵以上） | ◎ | ◎ |
| 書換速度 | ×（µs〜ms） | ◎ | ◎ | ○ |
| 容量 | ◎（TBクラス） | ○ | △ | ◎ |
| 面積効率 | ◎（積層構造） | △ | △ | ◎ |

---

## 🧭 SoC設計との関係

| 項目 | 内容 |
|------|------|
| 接続方式 | 通常は**外部接続**（eMMC, UFS, NVMe等）でアクセス |
| 役割 | 起動コード格納、ログ保存、大容量データ領域 |
| 制御技術 | **ECC（LDPC等）・ウェアレベリング・キャッシュ制御**が必要 |
| ファイルシステム連携 | **NAND単体ではなく、制御＋ソフトウェアとの一体設計**が重要 |

---

## 📌 階層構成と設計観点

| 階層 | 概要 |
|------|------|
| **セル** | 電荷蓄積により1〜4ビットを保持（TLC/QLC） |
| **ページ** | 書き込みの最小単位（通常2KB〜16KB） |
| **ブロック** | 消去単位（複数ページ） |
| **ダイ / チャネル** | 物理的なチップ構成（複数ブロックを制御） |

> 💡 NANDは**ブロック単位での消去**が必要であり、**書き換えのたびにコピー＆再配置が発生**。このため、**コントローラ設計（FTL: Flash Translation Layer）**が性能・寿命に大きく影響します。

---

## ⚠️ 設計・使用上の注意点

| 課題 | 内容 |
|------|------|
| 書換え寿命 | 書換回数は**TLC/QLCで数千〜数万回**が上限 |
| リテンション劣化 | 高温・長期間での**電荷消失によるデータ喪失**リスク |
| 読み出し干渉 | 近隣セルへの影響（Read Disturb）への対策が必要 |
| 誤り訂正 | ECC（LDPC, BCH等）の精度と遅延トレードオフあり |

---

## 📚 教材的意義

- メモリ単体ではなく、**コントローラ・ソフトウェアと一体設計される記憶技術**として重要
- 容量/速度/耐久性のトレードオフを理解し、**用途に応じた選択設計**が学べる
- eMMCやUFSの**寿命評価やストレージ制御技術**との接続点になる

---

## 🔗 関連章（参照）

- [mram.md](./mram.md)：MRAMとの不揮発構造比較  
- [基礎編 第6章](../chapter6_test_and_package/)：パッケージ技術と信頼性評価（温度・寿命）  
- [応用編 第7章](../d_chapter7_automation_and_verification/)：書換劣化と自動テスト・エミュレーション技術

---

🏘 [応用編 第1章：メモリ技術｜Applied Chapter 1: Memory Technologies](../d_chapter1_memory_technologies/README.md)

---

© 2025 Shinichi Samizo / MIT License

---
