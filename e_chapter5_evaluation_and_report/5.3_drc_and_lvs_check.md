# 5.3 DRC・LVSチェックとエラー解析

本節では、OpenLaneによる物理設計の最終段階で実施される DRC（Design Rule Check）および LVS（Layout vs Schematic）チェックの結果を読み解きます。

これらは、**製造可能性と論理的一貫性**を確認するための重要ステップであり、設計の正しさを最終的に保証するものです。

---

## 📐 DRC（デザインルールチェック）

### ▶ 目的

- 半導体製造上の物理的ルールに違反していないかを検出
- 最小配線幅、スペース、オーバーラップなどの確認

### ▶ 出力ファイル

```sh
runs/<design>/reports/signoff/drc.rpt
```

### ▶ 確認項目例

| 項目 | 内容 | 備考 |
|------|------|------|
| Spacing Rule | 配線間隔が狭すぎないか | メタル層ごとに規定 |
| Width Rule   | 配線幅が足りているか   | 特に高電流経路 |
| Enclosure    | VIAが下層メタルをはみ出ていないか | VIA関連DRCは多い |

---

## 🔄 LVS（レイアウトと回路図の一致チェック）

### ▶ 目的

- 回路図（ネットリスト）とレイアウト（GDS）が論理的に一致しているかを確認
- 接続ミスやショート/オープンを検出

### ▶ 出力ファイル

```sh
runs/<design>/reports/signoff/lvs.rpt
```

### ▶ エラー例

| エラータイプ | 意味 | 対処法 |
|--------------|------|--------|
| Missing Net  | 接続されていないネット | GDSまたはRTLを再確認 |
| Extra Net    | 余分な接続が存在       | 配線誤りまたは誤合成 |
| Pin Mismatch | ピン名・方向不一致    | RTLとSDCの整合性確認 |

---

## 🔧 エラー解析の実例（FSM）

```
** DRC Errors Found = 0
** LVS Result = MATCH
```

このように表示されれば、設計は物理的・論理的に正しく、製造に進むことが可能です。

一方、以下のようなエラーが出た場合：

```
** DRC Errors Found = 8
- Spacing violation at ...
```

→ `final.def` や `final.gds` をKLayoutで開き、該当箇所の配線状況を確認しましょう。

---

## 📘 教材としての意義

DRCとLVSは、「設計の完成度」を問う最後の関門です。  
ただの合否ではなく、**どのルールに違反したのか、なぜそうなったのかを読み解く力**が、設計者の力量を決定づけます。

---

## 🔗 次節への接続

次節 [5.4](5.4_comparison_summary.md) では、FSM、MUX、Adderの各設計結果を比較し、設計構造の違いや実装上の特性を整理・考察します。
